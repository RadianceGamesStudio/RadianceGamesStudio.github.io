<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ukrainian Birds – Web App</title>

    <!-- PWA manifest + theme color -->
    <meta name="theme-color" content="#0057B7">
    <link rel="manifest" href="ukrbirds.webmanifest">
    <link rel="icon" href="favicon.ico">

    <!-- iOS PWA hints -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-512.png">

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            background: #000;
            color: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .loading {
            text-align: center;
            opacity: 0.85;
        }
        .loading h1 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #333;
            border-top-color: #FFD700;
            border-radius: 50%;
            animation: spin 0.9s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .hint {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            opacity: 0.7;
        }
    </style>

    <script>
        const ITCH_PAGE_URL   = "https://radiance-games-studio.itch.io/ukrbirds";
        const DIRECT_GAME_URL = "https://html-classic.itch.zone/html/15567055/index.html";

        // As early as possible: ping itch page (for stats) then redirect to classic HTML
        (function () {
            try {
                // This triggers a GET to the itch game page.
                // Most analytics systems count that as a view.
                const img = new Image();
                img.referrerPolicy = "no-referrer-when-downgrade"; // default, but explicit
                img.src = ITCH_PAGE_URL;
            } catch (e) {
                // If something fails, we just ignore and still redirect.
            }

            // Give the request a tiny bit of time to fire, then redirect.
            // 300–500 ms is usually enough for the HTTP request to be sent.
            setTimeout(() => {
                window.location.replace(DIRECT_GAME_URL);
            }, 400);
        })();
    </script>
</head>
<body>
    <!-- Simple loading fallback while redirect happens -->
    <div class="loading">
        <h1>Launching Ukrainian Birds…</h1>
        <div class="spinner"></div>
        <div class="hint">Opening game…</div>
    </div>

    <script>
        // Minimal service worker registration so the page is installable as a PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }
    </script>
</body>
</html>
